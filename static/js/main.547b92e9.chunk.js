(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t){e.exports="data:image/jpeg;base64,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"},128:function(e,t,n){e.exports={spinner:"Spinner_spinner__KCoow"}},134:function(e,t,n){e.exports=n(337)},139:function(e,t,n){},196:function(e,t){},198:function(e,t){},232:function(e,t){},233:function(e,t){},309:function(e,t,n){},311:function(e,t,n){},313:function(e,t,n){},337:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(125),r=n.n(o),i=n(338),p=n(339),u=(n(139),n(10)),c=n.n(u),l=n(19),d=n(30),y=n(31),m=n(33),A=n(32),f=n(34),b=n(126),w=n(15),h=n(51),g=n(69),v=n(52),x=n.n(v),k=function(){return new Promise(function(e,t){window.addEventListener("load",Object(l.a)(c.a.mark(function n(){var a,s,o,r;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.ethereum){n.next=13;break}return a=new x.a(window.ethereum),n.prev=2,n.next=5,window.ethereum.enable();case 5:e(a),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),t(n.t0);case 11:n.next=14;break;case 13:window.web3?(s=window.web3,console.log("Injected web3 detected."),e(s)):(o=new x.a.providers.HttpProvider("https://rinkeby.infura.io"),r=new x.a(o),console.log("No web3 instance injected, using Local web3."),e(r));case 14:case"end":return n.stop()}},n,this,[[2,8]])})))})},P=(n(307),n(309),n(311),n(313),n(127)),B=n.n(P),E=n(128),D=n.n(E),H=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:D.a.spinner})}}]),t}(a.Component),M=n(129),O=n.n(M),S=function(e){if("string"!==typeof e)throw new Error("in sig2vrs, signature must be type 'string', is currently type "+typeof e+".");var t="0x"===e.slice(0,2)?e.slice(2):e;if(130!==t.length)throw new Error("sig length not 130 or 132 in sig2vrs");return{v:"0x"+t.slice(128,130),r:"0x"+t.slice(0,64),s:"0x"+t.slice(64,128)}},I=n(130),j=n.n(I);var C=function(e,t,n,a){j.a.post(e,t).then(function(e){return 0===e.data.code?!n||n(e.data.data):a?a(e):(alert(e.data.message),!1)}).catch(function(e){return a?a(e):(alert(e),!1)})},R=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(s)))).state={delegate:"0xe8A098f3643Fd62C05A659F6b75f48562003b900",recipient:"",amount:100,fee:new w.BigNumber(0),orderId:null,isDisabled:!0},n.componentDidMount=function(){var e=n.props,t=e.queryParams,a=e.web3;if(console.log("DelegatedTransferForm queryParams",t),t.to&&(a.utils.isAddress(t.to)?(console.log("DelegatedTransferForm: queryParams.to correctly parsed"),n.setState({recipient:t.to})):console.warn("DelegatedTransferForm: queryParams.to is provided but not an address")),t.self){var s=parseFloat(t.self);isNaN(s)?console.warn("DelegatedTransferForm: queryParams.amount is provided but parseFloat returns NaN."):(console.log("DelegatedTransferForm: amount parsed, get",s),n.setState({amount:s}))}"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?n.setState({isDisabled:!1}):n.setState({isDisabled:!0})},n.handleAmountChange=function(e){n.setState({amount:e})},n.handleRecipientChange=function(e){n.setState({recipient:e.target.value})},n.handleOrderIdChange=function(e){n.setState({orderId:e})},n.handleDelegatedTransferFormSubmit=function(){var e=Object(l.a)(c.a.mark(function e(t){var a,s,o,r,i,p,u,l,d,y,m,A,f,b,h,g,v,x,k,P,B,E,D,H,M,O,I;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=n.props,s=a.web3,o=a.accounts,r=a.delegatedTransferOperator,i=a.networkId,p=a.callback,u=n.state,l=u.recipient,d=u.amount,y=u.delegate,m=u.fee,!u.isDisabled){e.next=5;break}return e.abrupt("return");case 5:if(0!==o.length){e.next=8;break}return alert("No account injected form dapp browser.\nPlease unlock your account in MetaMask or the DApp browser."),e.abrupt("return");case 8:if(console.log("recipient",l),console.log("amount",d),s.utils.isAddress(l)){e.next=13;break}return alert("The recipient address is not valid."),e.abrupt("return");case 13:return A=new w.BigNumber(d),f=A.times(1e18),b=r._address,h=l,g=y,v=f,x=m,k=Math.floor(Date.now()/1e3),P="0x",console.log("_userData",P),B=s.utils.soliditySha3({t:"address",v:b},{t:"address",v:h},{t:"address",v:g},{t:"uint256",v:v},{t:"uint256",v:x},{t:"uint256",v:k},{t:"bytes",v:P}),console.log("delegationHash",B),e.next=27,s.eth.sign(B,o[0]);case 27:if(E=e.sent,D=S(E),27===(H=parseInt(D.v))||28===H){e.next=32;break}throw new Error("_vrs.v not 27 or 28");case 32:1,M=r._address,console.log("operator_address",M),O=r.methods.transferPreSigned(h,g,v,x,k,P,D.r,D.s,D.v).encodeABI(),console.log("tx_data",O),I={networkId:i,version:1,delegatedTransferOperatorAddress:r._address,tx_data:O},"http://test.selftoken.co:8080/v1/delegatedTransfer",C("http://test.selftoken.co:8080/v1/delegatedTransfer",I,function(e){console.log("order",e),alert("\u4ea4\u6613\u5df2\u767c\u9001\uff01\n\u53d6\u8ca8\u55ae\u865f\uff1a"+e._id),p()},function(e){console.error("error",e)});case 40:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(f.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.handleDelegatedTransferFormSubmit,id:"transfer-form",className:"transfer-form"},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"delegatedTransferRecipientInput"},"Recipient"),s.a.createElement("input",{type:"text",className:" address-input address-text",id:"delegatedTransferRecipientInput",value:this.state.recipient,onChange:this.handleRecipientChange,placeholder:"0x0000000000000000000000000000000000000000"})),s.a.createElement("div",{className:"form-group"},s.a.createElement("div",{className:"text-center mb-3"},s.a.createElement("label",{htmlFor:"transferAmount"},"Token Amount (SELF)"),s.a.createElement(O.a,{id:"transferAmount",type:"number",pattern:"\\d*",mobile:!0,className:"numeric-input",min:0,step:10,value:this.state.amount,onChange:this.handleAmountChange}))),s.a.createElement("div",{className:"text-center"},s.a.createElement("button",{type:"submit",className:"solid-rectangle-button"},s.a.createElement("span",null,"Send without ETH"))))}}]),t}(a.Component);R.defaultProps={web3:{},accounts:[],delegatedTransferOperator:{},networkId:1,callback:function(){}};var Q=R;"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||(console.log=function(){});function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e.div(1e18).toFormat(t)}w.BigNumber.config({FORMAT:{prefix:"",decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0,suffix:""}});var z=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(s)))).state={web3:null,networkId:0,selfTokenContract:null,accounts:null,accountState:{ethBalanceBN:new w.BigNumber(0),selfBalanceBN:new w.BigNumber(0)},globalState:{totalSupplyBN:new w.BigNumber(0)},queryParams:{}},n.componentDidMount=Object(l.a)(c.a.mark(function e(){var t,a,s,o,r,i,p,u;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.props.location.search,a=b.parse(t),n.setState({queryParams:a}),e.next=6,k();case 6:return s=e.sent,e.next=9,s.eth.net.getId();case 9:if(o=e.sent,r=h.networks.hasOwnProperty(o),n.setState({web3:s,networkId:o,isValidNetwork:r}),r){e.next=14;break}return e.abrupt("return");case 14:return i=new s.eth.Contract(h.abi,h.networks[o].address),p=new s.eth.Contract(g.abi,g.networks[o].address),n.setState({selfTokenContract:i,delegatedTransferOperator:p},function(){n.fetchGlobalState()}),e.next=19,s.eth.getAccounts();case 19:return u=e.sent,e.next=22,n.setState({accounts:u},function(){});case 22:n.poll(),setInterval(function(){n.poll()},1e4),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(0),alert("Failed to load web3, accounts, or contract. Check console for details."),console.error(e.t0);case 30:case"end":return e.stop()}},e,this,[[0,26]])})),n.poll=Object(l.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("poll"),n.fetchAccountState();case 2:case"end":return e.stop()}},e,this)})),n.fetchGlobalState=Object(l.a)(c.a.mark(function e(){var t,a,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("fetchGlobalState"),t=n.state.selfTokenContract){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t.methods.totalSupply().call();case 6:a=e.sent,s=new w.BigNumber(a),(o=Object.assign({},n.state.globalState)).totalSupplyBN=s,n.setState({globalState:o});case 11:case"end":return e.stop()}},e,this)})),n.fetchAccountState=Object(l.a)(c.a.mark(function e(){var t,a,s,o,r,i,p,u,l,d;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("fetchAccountState"),t=n.state,a=t.web3,s=t.accounts,o=t.selfTokenContract,0!==s.length){e.next=4;break}return e.abrupt("return");case 4:return r=a.eth.getBalance(s[0]),i=o.methods.balanceOf(s[0]).call(),e.next=8,Promise.all([r,i]);case 8:p=e.sent,u=p[0],l=p[1],console.log("ethBalanceStr",u),console.log("selfBalanceStr",l),(d=Object.assign({},n.state.accountState)).ethBalanceBN=new w.BigNumber(u),d.selfBalanceBN=new w.BigNumber(l),n.setState({accountState:d});case 17:case"end":return e.stop()}},e,this)})),n}return Object(f.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.state,t=e.web3,n=e.accounts,a=e.delegatedTransferOperator,o=e.networkId,r=e.queryParams;return this.state.web3?this.state.isValidNetwork?s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"container"},this.state.isValidNetwork&&1!==this.state.networkId&&s.a.createElement("div",null,s.a.createElement("div",{className:"alert alert-warning"},"You are on testnet. Please switch to Mainnet in MetaMask or your dapp browser.")),s.a.createElement("div",{className:"mt-3 mb-3 text-center"},s.a.createElement("h3",null,"You have"),s.a.createElement("h3",null,s.a.createElement("i",{className:"fab fa-ethereum"})," ",T(this.state.accountState.ethBalanceBN,4)," ETH"),s.a.createElement("h3",null,s.a.createElement("img",{src:B.a,style:{height:"1em"}}),s.a.createElement("span",null,T(this.state.accountState.selfBalanceBN,1)," SELF"))),s.a.createElement("div",{className:"text-center mb-5"},s.a.createElement(Q,{web3:t,accounts:n,delegatedTransferOperator:a,networkId:o,queryParams:r,callback:this.fetchAccountState})))):s.a.createElement("div",{className:"alert alert-danger"},"Not on a valid Ethereum network. Please change the network to mainnet in MetaMask or your dapp browser."):s.a.createElement(H,null)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(i.a,null,s.a.createElement(p.a,{path:"/",component:z})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},51:function(e){e.exports={contractName:"SelfToken",abi:[{constant:!0,inputs:[],name:"defaultOperators",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_amount",type:"uint256"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_tokenHolder",type:"address"},{name:"_spender",type:"address"},{name:"_amount",type:"uint256"}],name:"operatorApprove",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"transferFrom",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_operator",type:"address"}],name:"addOfficialOperator",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"freezeMyAccount",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_recipients",type:"address[]"},{name:"_amounts",type:"uint256[]"},{name:"_userData",type:"bytes"}],name:"batchSend",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_account",type:"address"}],name:"unfreeze",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"transferFromFrozenAccount",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"claimOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"granularity",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"rejectAllOfficialOperators",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_amount",type:"uint256"},{name:"_userData",type:"bytes"},{name:"_operatorData",type:"bytes"}],name:"operatorSend",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_tokenHolder",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"frozenAccounts",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_recipients",type:"address[]"},{name:"_amounts",type:"uint256[]"}],name:"batchTransfer",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_account",type:"address"}],name:"freeze",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenHolder",type:"address"},{name:"_amount",type:"uint256"},{name:"_operatorData",type:"bytes"}],name:"mint",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_operator",type:"address"}],name:"authorizeOperator",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_amount",type:"uint256"},{name:"_userData",type:"bytes"}],name:"send",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_operator",type:"address"}],name:"isOfficialOperator",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"acceptAllOfficialOperators",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_operator",type:"address"}],name:"removeOfficialOperator",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupplyCap",outputs:[{name:"_totalSupplyCap",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"},{name:"_extraData",type:"bytes"}],name:"approveAndCall",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_operator",type:"address"},{name:"_tokenHolder",type:"address"}],name:"isOperatorFor",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_user",type:"address"}],name:"isUserAcceptingAllOfficialOperators",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"remaining",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"pendingOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_recipients",type:"address[]"},{name:"_amounts",type:"uint256[]"},{name:"_userData",type:"bytes"},{name:"_operatorData",type:"bytes"}],name:"operatorBatchSend",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_operator",type:"address"}],name:"revokeOperator",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_tokenHolder",type:"address"},{name:"_amount",type:"uint256"},{name:"_holderData",type:"bytes"},{name:"_operatorData",type:"bytes"}],name:"operatorBurn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_amount",type:"uint256"},{name:"_holderData",type:"bytes"}],name:"burn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"operator",type:"address"}],name:"OfficialOperatorAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"operator",type:"address"}],name:"OfficialOperatorRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"user",type:"address"}],name:"OfficialOperatorsAcceptedByUser",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"user",type:"address"}],name:"OfficialOperatorsRejectedByUser",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_account",type:"address"}],name:"AccountFrozen",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_account",type:"address"}],name:"AccountUnfrozen",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"}],name:"OwnershipRenounced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"},{indexed:!0,name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"operator",type:"address"},{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"amount",type:"uint256"},{indexed:!1,name:"holderData",type:"bytes"},{indexed:!1,name:"operatorData",type:"bytes"}],name:"Sent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"operator",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"amount",type:"uint256"},{indexed:!1,name:"operatorData",type:"bytes"}],name:"Minted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"operator",type:"address"},{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"amount",type:"uint256"},{indexed:!1,name:"holderData",type:"bytes"},{indexed:!1,name:"operatorData",type:"bytes"}],name:"Burned",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"operator",type:"address"},{indexed:!0,name:"tokenHolder",type:"address"}],name:"AuthorizedOperator",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"operator",type:"address"},{indexed:!0,name:"tokenHolder",type:"address"}],name:"RevokedOperator",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Approval",type:"event"}],compiler:{name:"solc",version:"0.4.25+commit.59dbf8f1.Emscripten.clang"},networks:{1:{name:"Mainnet",events:{},links:{},address:"0x67ab11058eF23D0a19178f61A050D3c38F81Ae21",transactionHash:"0xc0feba7db1c12949a7a7eff17a7bd97b4b828e4b9f75955de66fc4bd99be853b"},4:{name:"Rinkeby",events:{},links:{},address:"0xC5dA9446dA045e3c50561b6633D47Bb0532977b5",transactionHash:"0x2690931207bef2ea7140bfaf73e3852e43405e4e6ab0a68b3627c68b57b3d1e6"}},updatedAt:"2018-12-11T07:44:16.919Z"}},69:function(e){e.exports={contractName:"DelegatedTransferOperatorV4",abi:[{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_delegate",type:"address"},{name:"_value",type:"uint256"},{name:"_fee",type:"uint256"},{name:"_nonce",type:"uint256"},{name:"_userData",type:"bytes"},{name:"_sig_r",type:"bytes32"},{name:"_sig_s",type:"bytes32"},{name:"_sig_v",type:"uint8"}],name:"transferPreSigned",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"_tokenAddress",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{constant:!0,inputs:[{name:"hash",type:"bytes32"},{name:"sig",type:"bytes"}],name:"recover",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[],name:"tokenContract",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_operator",type:"address"},{name:"_to",type:"address"},{name:"_delegate",type:"address"},{name:"_value",type:"uint256"},{name:"_fee",type:"uint256"},{name:"_nonce",type:"uint256"},{name:"_userData",type:"bytes"}],name:"transferPreSignedHashing",outputs:[{name:"",type:"bytes32"}],payable:!1,stateMutability:"pure",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"usedNonce",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],compiler:{name:"solc",version:"0.4.24+commit.e67f0147.Emscripten.clang"},networks:{1:{name:"Mainnet",events:{},links:{},address:"0x3850F1A8104fBDbEa60B16FB1323cD3974031990",transactionHash:"0x90aafa974bd50ff3a6e36c3c5794e1ab091a0970f7d9cb5c74dad84339e0b0e9"},4:{name:"Rinkeby",events:{},links:{},address:"0x8e8e1d4b81f68f4646d22796a9c8e998696daff8",transactionHash:""}}}}},[[134,2,1]]]);
//# sourceMappingURL=main.547b92e9.chunk.js.map