{"version":3,"sources":["assets/img/selftoken_transparent_crop.png","styles/Spinner.module.css","utils/getWeb3.js","components/Spinner.js","components/DoubleBorderTitle.js","utils/sig2vrs.js","utils/api.js","components/DelegatedTransferForm.js","App.js","serviceWorker.js","index.js","styles/DoubleBorderTitle.module.css"],"names":["module","exports","spinner","getWeb3","Promise","resolve","reject","window","addEventListener","Object","asyncToGenerator","regenerator_default","a","mark","_callee","web3","_web","wrap","_context","prev","next","ethereum","Web3","enable","t0","console","log","stop","this","Spinner","react_default","createElement","className","styles","Component","DoubleBorderTitle","_this$props","props","children","doubleBorder","doubleBorderTitle","join","defaultProps","sig2vrs","sig","Error","stripped_sig","slice","length","v","r","s","api","url","data","succeed","failed","axios","post","then","result","code","alert","message","catch","error","DelegatedTransferForm","state","delegate","recipient","amount","fee","BigNumber","orderId","isDisabled","delegatedTransfer_api_url","componentDidMount","_this","queryParams","to","utils","isAddress","setState","warn","self","parseFloat","isNaN","location","hostname","handleAmountChange","value","handleRecipientChange","event","target","handleOrderIdChange","handleDelegatedTransferFormSubmit","_this$props2","accounts","delegatedTransferOperator","networkId","callback","_this$state","amountBN","amountWeiBN","_operator","_to","_delegate","_value","_fee","_nonce","_userData","delegationHash","_signature","_vrs","_int_v","operator_address","tx_data","post_data","preventDefault","abrupt","times","_address","Math","floor","Date","now","soliditySha3","t","toString","eth","sign","sent","parseInt","methods","transferPreSigned","encodeABI","version","delegatedTransferOperatorAddress","order","_id","onSubmit","id","htmlFor","type","onChange","placeholder","react_numeric_input_default","pattern","mobile","min","step","formatFromWeiBnToEtherStr","bn","decimals","arguments","undefined","div","toFormat","replace","config","FORMAT","prefix","decimalSeparator","groupSeparator","groupSize","secondaryGroupSize","fractionGroupSeparator","fractionGroupSize","suffix","App","selfTokenContract","accountState","ethBalanceBN","selfBalanceBN","globalState","totalSupplyBN","isAllDataFetched","queryString","isValidNetwork","search","qs","net","getId","SelfTokenJSON","networks","hasOwnProperty","Contract","abi","address","DelegatedTransferOperatorJSON","fetchGlobalState","getAccounts","setInterval","poll","_callee2","_context2","fetchAccountState","_callee3","totalSupplyStr","_context3","totalSupply","call","assign","_callee4","getEthBalance","getSelfBalance","values","ethBalanceStr","selfBalanceStr","_context4","getBalance","balanceOf","all","_this$state2","href","components_DoubleBorderTitle","style","height","src","selftokenIconCrop","components_DelegatedTransferForm","components_Spinner","Boolean","match","ReactDOM","render","HashRouter","Route","path","component","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.5689bdcb.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIEAAAC5CAMAAAA4V6yiAAADAFBMVEVHcEz//wDatiTIozbNoTHLojPLozPLojPLozPLozPLozPLpDPKpDTKpDTKpDTKozTKpDTLozPLozPKpDTKpDTJpDXJozXJpDXGqji/nz+qqlXOqjDIojbKpDTMozPKozTKpDTKpDTLpDPLozPKpDTKozTKpDTKpDTKozTLpDTLozPKozTKozTLpDPLozPLozPLozPKozTMozPNojH/fwDMpTPIojbLozPLozPLpDPKozTLpDPKpDTLozPLozPMozLJoTXQoi7Pny/NpjHMpTPKozTLpDPLpTPMpTPEnDrJnzXMozPLpDPLpDPKozTKozTKozTKpTTMmTPKojTLpDPLpDPGqjjGoDjKozTKozTLpDPKozTKozTMojPMozPLozPKozTKpDTLozPLpDO/vz/JojXLozPLozPLozPKozTHpzfKozTLpDPKozTKozTKpDTMpDPKpDTLpDPLpDPMpDPKojTKpDTMqjPLpTPKpDTKpDTLpDPKpDTKozTLozPJozXKozTKozTKpTTLpDPKpTTMpTLKozTMpTPLpDPMpzPLozPLpDPLozPJoTXLpDPKpDTKozTLpDPLpDPKpjTHpjfIozbMozPLozPMpDPKozTKozTMozPMozPNpjHMmTPKpDTJozXKpTTMpDPKozTLpDPLpDPKozTKozTKpTTKpDTLozPSpS3LpDPMpDLLozPLozPKpTTKpzTKozTKpDTLozPKpDTMozPLozPUqirJpDXLozPLpDPUqirMpTPKozTMoTPKpDTLpDPKozTLpDPMojPNpDHLpDPKojTKpDTLpDPJoTXJpjXKozTKozTQoi7KpDTLozPJpDXKpDTKpDTKpDTKozTKpDTMojLKozTLpDPNpTLHpTfKozTLozPLozPKpDTMpDPKpDTKozTKpDTKozTKozTLozPLpDPKpDTLojPLpDPLpDPKozTKpDTJpTXIozbKpDTKojTKpDTLozPLpTPLpDPLpDPLpDPLozPLpDPJpTXKozTMozLKpDTKozTLozM9okZsAAABAHRSTlMAAQcOKUVUbIufrby6x9vRvbuaf2tgUTASCAMVIUl4kbTN1d/p8PX6/v/77uXe2tSGcEYkAhQvpMbk+OPIqG09JgsQLlXcxUooDRhLy/Lqg04iBWHncQkbYrXx+X43GVmq/c+KBEin6M51ICeF87NXWr+PkEFTwg9375P3oTW2Q8nMRNM/R748sSP8t5kT7LmWdjsxFypf9nPEl2QyGgrmVmYtaq7Kw+BNmO0RrEziwVgdiHly9H3ABmXdnQxpsB6v2KWeUB/ZOpvQNCvrehagsj5dgqZvdEKOlTMlXECUh26NuOHSnIB8Ul6jY9erORzWLJKiNqloT3uBW4w4hIlntEru8AAADH9JREFUeNq12ndUFNcXB/A7QBAFTRCjshBLKMtdVKSplIgYC4KIIEIoimvWmmDXVcCKFQUNqCiKxEqiCVYUI5YoGhV+JrHFhBhjQyPFEktM+ZWjPz3AmXnvzuzy+XsPZ8/c8r5vFpBLMDE1e8O8kUXjJpZWTZu9afmWdXObFm+3bNXa1kSAhqeys3+nTdt27d91cHRyVqtdEDVqtWuHjp3cLJt3dvfwtDOBhuTl3eXtrt18NCjB18//ve4BPQKhgfR8v1fz3mrkUDv2sekb1A+Mzis4xKJ/KNIMsAwbGB4BxuQVPqirD8oR2W5wqygwmugPYmJRrrim8UOM1BFDE4a5ohLa4R8O0YHBTEaMHIVKuYweMxYM9NHHzdAQiePGG1SKqAkTfdFAPpPGGvAAJndAw8WNmwLK6KZOi0Oj6OSuBwX00/3QWGYkRSvYAW1D0XiSU+xBppnt1GhMmllD5G3h2XNc0Lhc5s4TgEzVNxWNr/18AYhUI97FhtBtiEAswQI3bBgLWwHJouHYUBYvAYJwK6RJC43s+G77aUun+c/tPSBUgxTL0glZbBlSZKQuX/FJgkdm1pKV9qu6zFs9Pcm60wzkyl7DTbJR8cmEFbc2Z9363A1Qm0l0Zovm/onIkWcuANun/DDg13WjmYl4lti0eUsksm3NAqagbciRv+Izb5CWa76Mc55+3o9ZAwtOQ21PCTEFth0tv2DWwnUCqw5fFiDTzl12wJe7bqEGpW1jHFK7ZyGLw54gIBGW7M1HSepPVCBlXyEy+O63BSpbD2uU1N8MJHgeYIfv5VOAzlM6XyTHF4G47k6cJZg/Rg9k/Q5+hRLeGioxiRORp/BQEJDp3vEX/yMxq4tBjHDYFbm0E+fpgEqYGZOG9WhDjww6qpMYhGNI8fXBQCALOp5cN6sVnJgQLYA4oaQASRwtTgpAtftEcq0OPDXZYwcjnLdNQ6Jx36iAKvh09qvyn4k/y6xgaTck628eRf8Kn794CmU722wCJmHXAKQr+Nc5oMpNScPIdqs9gaN4Esrhm1JK303ffjdhKHAdXYryTFzgBUR20UDwRjOU6dRmPRhRhHucguvoEjCeQAuUTzvrezCa4OOoROr5CDCSLttQkVEXVoJxzD6FyjhffB+MQSiJRIU0a0uKwHCqQYmoWMGlYjCYyWUNKufa9iQYasMFqbWzNRn51DE/qMAwplckihz2/gonJOh90MBK7PhR4oacAIFjeiNBaFgwGML7NIpqdhYAviS92dVe/EkFytk1RlF9jsL/lF8hZYczPweCYt6HUNSWl0EkapAbEmTsPwdKpS9DUYdaw0tXx1EqEde8VHEn/oKi2r6OACev5SHBAUZuYSrujKIm6eGVqAR/JOh0uB8oUfSreEBZVjveZ6VQKuF6fSwo4JUwA8Uc964zMdMdkE/9xVlQYKB4lW/UzbhFIdZIMMdcQTP0vYli5nrWT96TKEvaz8YO5Mq8hWIcrkI9pqspb70LjweBTCebiP+lRkVQjy7zGCFWpx1YIHccP0RRt/Uil5sKP+Ry6ThYD3LY3kFR7cWWXNTdpsiXuOwjWeP4W4Z4GS4ViX26S9dC5NJaLfICulVrUdTyYBCzcrqDC+G0XN0PyLzvoSinShWI8QqZSGhIp2u59Kw6RiIQNpWqZvlkQmpIG7aeXIlFVRLV/LhIqnt/S6UsyKlRQBNcjeI6zgMpNUcIDZk3Jh1IdI2k9u0NT5Byf78DYUHmmAHJT/2llssJ6S2vGjiNkltGCKRbyxUNikvuzIigpSmxyHVqYzHpRc5Xkqlj7waQdG7NA+Qq63wf+Prd1qKE7TZ6xiDPXopcyUfmA99nfigl9ENWQ5f/kohctwjvW/QXUZLz5/astL+5ijCWFSv5D6GAcReYFcCKuplN0pDHuQk3QRYlaRgnflV31jkTfaEMebT9+wLH2fbIEJvCejkdddefMJYTdMAkdGcOd9qcBFtGxnjY2JnfDJc50encRQ37cnrdU2Bc/vad0nJ39DXO9bbmDG/DhtiCtPn8G27ydW9gahSKbDcH27FC96MM7kiEsVd0zxVqZPP9/bGKcbxUnuFVYoa7CbCM/Q55Rq82BWmPn/BSw6jKCPZIzuXnv8lmrHaOL0C2/LvA1DIPuSxH6Bhz2bIbsvVnv41WPSVk0N7urKla/zunoY+zZ7KoRRlyJR5fxEr/7lXsmQyzZX+FNbHI57ZuA6MSU2LYy7ElMBXbJCJfxvVy5anhxlFOYNrniHxxViWsJf1rPmut2JgAk+3bBUhw8443I789Yw32V7yjWnf3ARIkXqwBScKibShtSy6wqWYv1yJfWvuN0g0p1CxESaGHdcAm9FhWiAQZk5aAFOGslVZ6rfHfcaTfyUNSQ4boQIKQtVC6god1wKOaulONBHl/BIOUAOnIcbo18AX9OAAJ1E+GSJ53vQokd1omEARuPKNBgtSnUnOpupSNEuJtgaLmXiwSODcvFSRSz20XFLeT+L6t9eDeSNHnWSCI2jQaxWUnCEAzYlY2kl4oiy97oTIbxSXtACL7Cw5IoK6erxId6ydSUaUVUEUMPIAUqS30IGKBo8RKSPACstIcVySY8ahcrBlPoLjnUUDXr3I4EmitPxNZdR6RKGrxSZDjpxRSQ+ZXRJMfgk8AyHLOvSNpNSyugfr+FE9MceO9QJaiBZYuSMqQxVBXl60oxsUmEGTqYVGGBNsPPax3nftLi2KOjAW5is/PRQLN1l11g2CC+Dd3qwHZdI/f05CO7LA6G/LvW+Kf2gXyCbnP/ZDAd9z3qlpX4nbi5WoDShQ926ZBgqrNtX65vuIiOjc/gjJBOU5IEHtivQr+z91ZdIFVg0LF6x6Q5vLMp6/2rsSvaVag2N+LnZHAseI+vFDiI54qQLngigIkSBs3r+jF+Sj+8r49GED40lqLBA6XvQHg6gPxMoFBPjpdiATq2w8BAtwYz0C59DZVSNFtvG6m+Cf9wUAqj8VpSOCz5ql40LMEg4Vb0FZDx2zRPq0Gw+mfuqFi2SvACHSLnmhRIdc/wCii90eiMnkTwDiinu1ERR5kirV3wFmQzcvsUSEqELNEJIeF3XxrFcjX8+nXKF/n+oFS8P7ggC/G5bQG+bwCqrNRJt/6lyYTj5GuLojo6q4CBYZWjEJ5Onwv1Lkcmv3zam/1DhFAAZNdc9Qox9LabSAEb6zVz9uyQJGZjWegDHtqtUFg37o/jjQ5CoqkD26GZNk/v24DVem1gnoB7noxKBNiTa7Em6/nPnpjH6zP6bItKNPjURnS3AuGF0xbVoeKRfkWOlAmkHbRR/VB1ctLZZKPRMj8E5QactGXEqRbvbjL/LaW/gaeLtjGB7kmv/g5/zJrelLngVK25n2Qo6zkVYxnGD0FFNuUk4hMW6Jfnqu/xiHD1vmg2I7NzLMq9LAKXsgdhixbr4JiEfO7uTDy80N4SfjmTXbDPgPFpjASZJzN632j+nMAsvg1CgRFis5XMZJ804fwWnGYlp0mw86BAj2nO7LS+yWv2mt0KTJln1jlBTIJ9kmJzHgWDrX9UIVsTadGyawA56c6n15Qh2pzKLI5dg73AjLh/t6OyKJd0RPq0k/SIMfCqXogKu67VMs9luuzj0Eex8nrSUMR2OraTWRLdGf89zxL6vMs7ncIzKo4gxxph3qCiKn5yKVN/fjxDmZGq/nnlgZ5JvYAUYe3I59LVdtn4bYS5S+/u6KTFrnyQ0DchvhEJNB2iLEZmHU/AurQ3V/f699WkUgQu08FEvT/zkYS38jR1f9sDJm5qjzYzs5ut9k3zwY9rx7uqEGKtL9MGVVMSkMqdWzB8GnW1SPfG7l4Z2qHGXFI1XglMOQ2xoa2eCww7b6txQZ1owtw5P6iwQZkmQVc5/ZkY4OxygIC/fSMBuuBh0ASVdkMG4Lm23Ig0oX0b4B+LLwSDXRZw3zRyHwu9wQ5Vlb4uKARpY0295Kbc+9aOhuxAtVDQD7PO27G6ga/iqGgSMCwRKNUYG0vHSiU22auGg1VkLQJDJBlkY8GibM03wAGCRy4xZAV6RZmBgY7WnnDSekOyMm0BWMIP3gsD+ULPVLSGozEa/fUpLnZKEv+sMqTYEymWQdz+pB3lM+xvR7RKjAy3Y5Wf3a+UYZc263iR+y2hQahiir3WHfFslOGWiLIOzv4p/xnQbkJNCBBpy9/3LfFnm9jun09yskpNtHZuTA21qmsINXy3vU75zNLg3UCNDwhIjB998NFIZ+OT+jeps2a1bt2lbzx2D692FZJ6f8LICE9RlcE+VcAAAAASUVORK5CYII=\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"Spinner_spinner__KCoow\"};","import Web3 from \"web3\";\n\nconst getWeb3 = () =>\n  new Promise((resolve, reject) => {\n    // Wait for loading completion to avoid race conditions with web3 injection timing.\n    window.addEventListener(\"load\", async () => {\n      // Modern dapp browsers...\n      if (window.ethereum) {\n        const web3 = new Web3(window.ethereum);\n        try {\n          // Request account access if needed\n          await window.ethereum.enable();\n          // Acccounts now exposed\n          resolve(web3);\n        } catch (error) {\n          reject(error);\n        }\n      }\n      // Legacy dapp browsers...\n      else if (window.web3) {\n        // Use Mist/MetaMask's provider.\n        const web3 = window.web3;\n        console.log(\"Injected web3 detected.\");\n        resolve(web3);\n      }\n      // Fallback to localhost; use dev console port by default...\n      else {\n        // const provider = new Web3.providers.HttpProvider(\n        //   \"https://rinkeby.infura.io\"\n        // );\n        // const web3 = new Web3(provider);\n        const web3 = null;\n        console.log(\"No web3 instance injected.\");\n        resolve(web3);\n      }\n    });\n  });\n\nexport default getWeb3;\n","import React, { Component } from \"react\";\n\nimport styles from \"styles/Spinner.module.css\";\n\nclass Spinner extends Component {\n  render() {\n    return <div className={styles.spinner}></div>;\n  }\n}\n\nexport default Spinner;\n","import React, { Component } from \"react\";\nimport PropTypes from 'prop-types';\n\nimport styles from \"styles/DoubleBorderTitle.module.css\";\n\nclass DoubleBorderTitle extends Component {\n  render() {\n    const { className, children } = this.props;\n    return (\n      <div className={ className }>\n        <span className={[styles.doubleBorder, styles.doubleBorderTitle].join(' ')}>\n          { children }\n          <span></span>\n          <span></span>\n          <span></span>\n          <span></span>\n        </span>\n      </div>\n    );\n  }\n}\n\nDoubleBorderTitle.propTypes = {\n  className: PropTypes.string,\n  // title: PropTypes.string,\n};\n\nDoubleBorderTitle.defaultProps = {\n  className: \"mb-3\",\n  // title: \"\",\n};\n\nexport default DoubleBorderTitle;\n","// return vrs object\n// v: hex string\n// r: hex string\n// s: hex string\nconst sig2vrs = (sig) => {\n  if (typeof sig !== 'string') {\n    throw new Error(\"in sig2vrs, signature must be type 'string', is currently type \" + (typeof sig) + \".\");\n  }\n\n  const stripped_sig = (sig.slice(0, 2) === '0x') ? sig.slice(2) : sig;\n\n  if (stripped_sig.length !== 130) {\n    throw new Error(\"sig length not 130 or 132 in sig2vrs\");\n  }\n\n  const vrs = {\n    v: \"0x\" + stripped_sig.slice(128, 130),\n    r: \"0x\" + stripped_sig.slice(0, 64),\n    s: \"0x\" + stripped_sig.slice(64, 128),\n  }\n\n  return vrs;\n};\n\nexport default sig2vrs;\n","import axios from 'axios';\n\nfunction api(url, data, succeed, failed) {\n    axios.post(url, data).then(function (result) {\n        if (result.data.code === 0) return succeed? succeed(result.data.data): true;\n        if (failed) return failed(result);\n        alert(result.data.message);\n        return false;\n    }).catch(function (error) {\n        if (failed) return failed(error);\n        alert(error);\n        return false;\n    });\n}\n\n// function get(key, value) {\n//     if (!localStorage[key]) localStorage[key] = JSON.stringify(value);\n//     return JSON.parse(localStorage[key]);\n// }\n\n// function set(key, value) {\n//     localStorage[key] = JSON.stringify(value);\n// }\n\n// function dict(arr, key = '_id') {\n//     var o = {};\n//     for (var i in arr) o[arr[i][key]] = arr[i];\n//     return o;\n// }\n\nexport default api;","import React, { Component } from \"react\";\nimport PropTypes from 'prop-types';\nimport { BigNumber } from 'bignumber.js'; // not web3.utils.BN\nimport NumericInput from 'react-numeric-input';\n\nimport sig2vrs from \"utils/sig2vrs\";\nimport api from \"utils/api\";\nimport hexToEvenLengthHex from \"utils/hexToEvenLengthHex\";\n\n// import styles from \"../styles/DelegatedTransferForm.module.css\";\n\nclass DelegatedTransferForm extends Component {\n  state = {\n    delegate: \"0xe8A098f3643Fd62C05A659F6b75f48562003b900\",\n    recipient: \"\",\n    amount: 100, // SELF\n    fee: new BigNumber(0),\n    orderId: null,\n    isDisabled: false,\n    delegatedTransfer_api_url: \"http://test.selftoken.co:8080/v1/delegatedTransfer\",\n  };\n\n  componentDidMount = () => {\n    const { queryParams, web3 } = this.props;\n    console.log(\"DelegatedTransferForm queryParams\", queryParams);\n\n    if (!!queryParams.to) {\n      if (web3.utils.isAddress(queryParams.to)) {\n        console.log(\"DelegatedTransferForm: queryParams.to correctly parsed\");\n        this.setState({\n          recipient: queryParams.to,\n        })\n      } else {\n        console.warn(\"DelegatedTransferForm: queryParams.to is provided but not an address\");\n      }\n    }\n\n    if (!!queryParams.self) {\n      const amount = parseFloat(queryParams.self);\n      if (!isNaN(amount)) {\n        console.log(\"DelegatedTransferForm: amount parsed, get\", amount);\n        this.setState({\n          amount: amount,\n        });\n      } else {\n        console.warn(\"DelegatedTransferForm: queryParams.amount is provided but parseFloat returns NaN.\");\n      }\n    }\n\n    // now only work on localhost\n    if (window.location.hostname === \"localhost\" || window.location.hostname === \"127.0.0.1\") {\n      this.setState({\n        isDisabled: false,\n      });\n    } else {\n      this.setState({\n        isDisabled: false,\n      });\n    }\n  }\n\n  handleAmountChange = (value) => {\n    this.setState({\n      amount: value,\n    });\n  }\n\n  handleRecipientChange = (event) => {\n    this.setState({\n      recipient: event.target.value,\n    });\n  }\n\n  handleOrderIdChange = (value) => {\n    this.setState({\n      orderId: value,\n    });\n  }\n\n  handleDelegatedTransferFormSubmit = async (event) => {\n    event.preventDefault();\n\n    const {\n      web3,\n      accounts,\n      delegatedTransferOperator,\n      networkId,\n      callback\n    } = this.props;\n\n    const {\n      recipient,\n      amount, // number\n      delegate,\n      fee,\n      isDisabled,\n      delegatedTransfer_api_url,\n    } = this.state;\n\n    if (isDisabled) {\n      return;\n    }\n\n    if (accounts.length === 0) {\n      alert(\"No account injected form dapp browser.\\nPlease unlock your account in MetaMask or the DApp browser.\");\n      return;\n    }\n\n    // check address and amount\n    console.log(\"recipient\", recipient);\n    console.log(\"amount\", amount, typeof amount);\n    if (!web3.utils.isAddress(recipient)) {\n      alert(\"The recipient address is not valid.\");\n      return;\n    }\n\n    let amountBN = new BigNumber(amount);\n    let amountWeiBN = amountBN.times(1e18);\n\n    const _operator = delegatedTransferOperator._address;\n    const _to = recipient;\n    // TODO: use server's wallet address\n    const _delegate = delegate;\n    const _value = amountWeiBN;\n    const _fee = fee;\n    const _nonce = Math.floor(Date.now() / 1000);\n    // const _userDataNumber = this.state.orderId;\n    // const _userData = hexToEvenLengthHex(web3.utils.numberToHex(_userDataNumber));\n    const _userData = \"0x\";\n    console.log(\"_userData\", _userData);\n\n    // delegationHash is a 32-byte (\"0x\" + 64 chars) hex string.\n    const delegationHash = web3.utils.soliditySha3(\n      {t: \"address\", v: _operator},\n      {t: \"address\", v: _to},\n      {t: \"address\", v: _delegate},\n      {t: \"uint256\", v: _value.toString()},\n      {t: \"uint256\", v: _fee.toString()},\n      {t: \"uint256\", v: _nonce.toString()},\n      {t: \"bytes\", v: _userData},\n    );\n    console.log(\"delegationHash\", delegationHash);\n\n    // delegationSignature is a 65-byte (\"0x\" + 130 chars) hex string.\n    const _signature = await web3.eth.sign(delegationHash, accounts[0]);\n    const _vrs = sig2vrs(_signature);\n    const _int_v = parseInt(_vrs.v);\n\n    if (_int_v !== 27 && _int_v !== 28) {\n      throw new Error(\"_vrs.v not 27 or 28\");\n    }\n\n    const version = 1;\n    const operator_address = delegatedTransferOperator._address;\n    console.log(\"operator_address\", operator_address);\n\n    const tx_data = delegatedTransferOperator.methods.transferPreSigned(\n      _to,\n      _delegate,\n      _value,\n      _fee,\n      _nonce,\n      _userData,\n      // _signature\n      _vrs.r,\n      _vrs.s,\n      _vrs.v\n    // );\n    ).encodeABI();\n    console.log(\"tx_data\", tx_data);\n\n    const post_data = {\n      networkId,\n      version,\n      delegatedTransferOperatorAddress: delegatedTransferOperator._address,\n      tx_data,\n    }\n\n    api(delegatedTransfer_api_url, post_data, (order) => {\n      // if transaction is broadcasted\n      // data is order\n      console.log(\"order\", order);\n      alert(\"交易已發送！\\n取貨單號：\" + order._id);\n      callback();\n    }, error => {\n      // if failed\n      console.error(\"error\", error);\n    });\n\n    // axios.post(delegatedTransfer_api_url, post_data)\n    // .then((response) => {\n    //   console.log(response);\n    // })\n    // .catch((error) => {\n    //   console.log(error);\n    // });\n\n    // .estimateGas({\n    //   from: accounts[0],\n    //   gas: 150000,\n    // }).then((gasAmount) => {\n    //   console.log(\"estimateGas gasAmount\", gasAmount);\n    // })\n    // .catch((error) => {\n    //   // revert or throw or any error\n    //   console.error(\"estimateGas error\", error);\n    // });\n\n\n    // delegatedTransferOperator.methods.transferPreSigned(\n    //   _to,\n    //   _delegate,\n    //   _value,\n    //   _fee,\n    //   _nonce,\n    //   _userData,\n    //   // _signature\n    //   _vrs.r,\n    //   _vrs.s,\n    //   _vrs.v\n    // )\n    // .send({\n    //   from: accounts[0],\n    // })\n    // .once('transactionHash', (hash) => {\n    //   console.log('once transactionHash', hash);\n    // })\n    // .once('error', (error) => {\n    //   console.log('once error', error);\n    // })\n    // .then((receipt) => {\n    //   // will be fired once the receipt is mined\n    //   console.log(\"then receipt\", receipt);\n    //   callback();\n    // });\n  }\n\n  render() {\n    return (\n      <form\n        onSubmit={this.handleDelegatedTransferFormSubmit}\n        id=\"transfer-form\"\n        className=\"transfer-form narrow-container\"\n      >\n        <div className=\"form-group\">\n          <label htmlFor=\"delegatedTransferRecipientInput\">\n            Recipient\n          </label>\n\n          <input\n            type=\"text\"\n            className=\" address-input address-text\"\n            id=\"delegatedTransferRecipientInput\"\n            value={this.state.recipient}\n            onChange={this.handleRecipientChange}\n            placeholder=\"0x0000000000000000000000000000000000000000\"\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <div className=\"text-center mb-3\">\n            <label htmlFor=\"transferAmount\">Token Amount (SELF)</label>\n            <NumericInput\n              id=\"transferAmount\"\n              type=\"number\"\n              pattern=\"\\d*\"\n              mobile\n              className=\"numeric-input\"\n              min={0}\n              step={10}\n              value={this.state.amount}\n              onChange={this.handleAmountChange}\n            />\n          </div>\n        </div>\n{/*\n        <div className=\"form-group\">\n          <div className=\"text-center mb-3\">\n            <label htmlFor=\"orderId\">Order ID</label>\n            <NumericInput\n              id=\"orderId\"\n              mobile\n              className=\"numeric-input\"\n              min={0}\n              step={1}\n              value={this.state.orderId}\n              onChange={this.handleOrderIdChange}\n            />\n          </div>\n        </div> */}\n\n        <div className=\"text-center\">\n          <button type=\"submit\" className=\"solid-rectangle-button\">\n            {/* <span>Send</span> */}\n            <span>Transfer</span>\n          </button>\n        </div>\n      </form>\n    );\n  }\n}\n\nDelegatedTransferForm.propTypes = {\n  web3: PropTypes.object,\n  accounts: PropTypes.array,\n  delegatedTransferOperator: PropTypes.object,\n  networkId: PropTypes.number,\n  callback: PropTypes.func,\n};\n\nDelegatedTransferForm.defaultProps = {\n  web3: {},\n  accounts: [],\n  delegatedTransferOperator: {},\n  networkId: 1,\n  callback: () => {},\n};\n\nexport default DelegatedTransferForm;\n","import React, { Component } from \"react\";\nimport { Route, Link } from \"react-router-dom\";\nimport * as qs from \"query-string\";\nimport { BigNumber } from 'bignumber.js'; // not web3.utils.BN in 1.0.0-beta.34\n\nimport SelfTokenJSON from \"./contracts/SelfToken.json\";\nimport DelegatedTransferOperatorJSON from \"./contracts/DelegatedTransferOperatorV4.json\";\nimport getWeb3 from \"./utils/getWeb3\";\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport \"./styles/AddressInput.css\";\nimport \"./styles/NumericInput.css\";\nimport \"./App.css\";\n\nimport selftokenIconCrop from \"./assets/img/selftoken_transparent_crop.png\";\n\nimport Spinner from \"./components/Spinner.js\";\nimport DoubleBorderTitle from \"./components/DoubleBorderTitle.js\";\nimport DelegatedTransferForm from \"./components/DelegatedTransferForm.js\";\n// import ERC20TransferForm from \"./components/ERC20TransferForm.js\";\n\n// const BN = require('bn.js'); // used in web3\n\n\nif (window.location.hostname === \"localhost\" || window.location.hostname === \"127.0.0.1\") {\n} else {\n  // console.log will not work in production\n  console.log = () => {};\n}\n\nconst fmt = {\n  prefix: '',\n  decimalSeparator: '.',\n  groupSeparator: ',',\n  groupSize: 3,\n  secondaryGroupSize: 0,\n  fractionGroupSeparator: ' ',\n  fractionGroupSize: 0,\n  suffix: ''\n}\nBigNumber.config({ FORMAT: fmt });\n\n// round to `decimals` digits\n// remove .000, but .100 is kept\nfunction formatFromWeiBnToEtherStr(bn, decimals=4) {\n  return bn.div(1e18).toFormat(decimals).replace(/\\.0+$/,'');\n}\n\nclass App extends Component {\n  state = {\n    web3: null,\n    networkId: -1,\n    selfTokenContract: null,\n    accounts: null,\n    accountState: {\n      ethBalanceBN: new BigNumber(0),\n      selfBalanceBN: new BigNumber(0),\n    },\n    globalState: {\n      totalSupplyBN: new BigNumber(0),\n    },\n    queryParams: {},\n    isAllDataFetched: false,\n  };\n\n  componentDidMount = async () => {\n    try {\n      console.log(\"this.props\", this.props);\n      console.log(\"window.location\", window.location);\n\n      const queryString = this.props.location.search; // \"?xxx\"\n      const queryParams = qs.parse(queryString); // object with strings\n      this.setState({\n        queryParams,\n      });\n\n      // Get network provider and web3 instance.\n      const web3 = await getWeb3();\n\n      if (!web3) {\n        this.setState({\n          isAllDataFetched: true,\n        });\n        return;\n      }\n\n      // Get the networkId and check if on valid network.\n      const networkId = await web3.eth.net.getId(); // Number\n      const isValidNetwork = SelfTokenJSON.networks.hasOwnProperty(networkId); // bool\n      console.log(\"networkId\", networkId);\n\n      this.setState({\n        web3,\n        networkId,\n        isValidNetwork,\n      });\n\n      // If not on valid network, stop here.\n      if (!isValidNetwork) {\n        this.setState({\n          isAllDataFetched: true,\n        });\n        return;\n      }\n\n      // Init contract instance.\n      const selfTokenContract = new web3.eth.Contract(\n        SelfTokenJSON.abi,\n        SelfTokenJSON.networks[networkId].address\n      );\n\n      const delegatedTransferOperator = new web3.eth.Contract(\n        DelegatedTransferOperatorJSON.abi,\n        DelegatedTransferOperatorJSON.networks[networkId].address\n      );\n\n      this.setState({\n        selfTokenContract,\n        delegatedTransferOperator,\n      }, () => {\n        // fetch global state\n        this.fetchGlobalState();\n      });\n\n      // Use web3 to get the user's accounts.\n      const accounts = await web3.eth.getAccounts();\n\n      await this.setState({\n        accounts\n      }, () => {\n        // fetch user state\n      });\n\n      setInterval(() => {\n        this.poll();\n      }, 10000);\n      await this.poll();\n\n      this.setState({\n        isAllDataFetched: true,\n      });\n      // this.fetchAccountState();\n    } catch (error) {\n      // Catch any errors for any of the above operations.\n      // Should never go here.\n      alert(\n        `Failed to load web3, accounts, or contract. Check console for details.`\n      );\n      console.error(error);\n    }\n  };\n\n  poll = async () => {\n    console.log(\"poll\");\n\n    // this.fetchGlobalState();\n    this.fetchAccountState();\n  }\n\n  fetchGlobalState = async () => {\n    console.log(\"fetchGlobalState\");\n\n    const { selfTokenContract } = this.state;\n\n    // If contract is not ready, return.\n    if (!selfTokenContract) {\n      return;\n    }\n\n    // Get total supply\n    const totalSupplyStr = await selfTokenContract.methods.totalSupply().call();\n    const totalSupplyBN = new BigNumber(totalSupplyStr);\n\n    // Make a clone of globalState.\n    const globalState = Object.assign({}, this.state.globalState);\n    globalState.totalSupplyBN = totalSupplyBN\n\n    // Update state with the result.\n    this.setState({ globalState });\n  };\n\n  fetchAccountState = async () => {\n    console.log(\"fetchAccountState\");\n\n    const { web3, accounts, selfTokenContract } = this.state;\n\n    // If there are no accounts injected, return.\n    if (accounts.length === 0) {\n      return;\n    }\n\n    // promises\n    const getEthBalance = web3.eth.getBalance(accounts[0]);\n    const getSelfBalance = selfTokenContract.methods.balanceOf(accounts[0]).call();\n    const values = await Promise.all([getEthBalance, getSelfBalance]);\n    const ethBalanceStr = values[0];\n    const selfBalanceStr = values[1];\n    console.log(\"ethBalanceStr\", ethBalanceStr);\n    console.log(\"selfBalanceStr\", selfBalanceStr);\n\n\n    // Make a clone of accountState.\n    let accountState = Object.assign({}, this.state.accountState);\n    accountState.ethBalanceBN = new BigNumber(ethBalanceStr);\n    accountState.selfBalanceBN = new BigNumber(selfBalanceStr);\n\n    // // Get ETH Balance\n    // const ethBalanceStr = await web3.eth.getBalance(accounts[0]);\n    // const ethBalanceBN = new BigNumber(ethBalanceStr);\n\n    // // Get SELF balance\n    // const balanceStr = await selfTokenContract.methods.balanceOf(accounts[0]).call();\n    // const balanceBN = new BigNumber(balanceStr);\n\n    // Update state with the result.\n    this.setState({ accountState });\n  };\n\n  render() {\n    const { web3, accounts, delegatedTransferOperator, networkId, queryParams } = this.state;\n\n    // Show spinner if still fetching some data.\n    if (!this.state.isAllDataFetched) {\n      return <Spinner/>;\n    }\n\n    // If not on a valid testnet, ask the user to change the network.\n    // if (!this.state.isValidNetwork) {\n    //   return\n    //   <div className=\"App\">\n    //     <div className=\"container\">\n    //       <div className=\"alert alert-danger\">Not on a valid Ethereum network. Please change the network to mainnet in MetaMask or your dapp browser.</div>\n    //     </div>\n    //   </div>;\n    // }\n\n    return (\n      <div className=\"App\">\n\n        <div className=\"container\">\n\n          {/* No web3 */}\n          { !this.state.web3 &&\n            <div className=\"alert alert-danger\">\n              <div>No web3 detected. Please open this website in a dapp browser or a browser with MetaMask.</div>\n              <div>{ window.location.href }</div>\n            </div>\n          }\n\n          {/* Not on valid network */}\n          { !!this.state.web3 && !this.state.isValidNetwork &&\n            <div className=\"alert alert-danger\">Not on a valid Ethereum network. Please switch to mainnet in MetaMask or your dapp browser.</div>\n          }\n\n          {/* Show warning message if the user or the developer is on testnet. */}\n          {(this.state.isValidNetwork && this.state.networkId !== 1) && (<div>\n            <div className=\"alert alert-warning\">You are on testnet. Please switch to Mainnet in MetaMask or your dapp browser.</div>\n          </div>)}\n\n          <div className=\"mb-4\"></div>\n\n          {/* <div>Total Supply: {formatFromWeiBnToEtherStr(this.state.globalState.totalSupplyBN)} SELF</div> */}\n\n          {/* icon and text inline when screen width >= 768 */}\n          {/* icon left and text right when screen width <= 767 */}\n          <DoubleBorderTitle>Balances</DoubleBorderTitle>\n          <div className=\"row mb-4 narrow-container\">\n            <div className=\"col-md-6 text-center mb-2\">\n              <div className=\"h3 balance-container\">\n                <span className=\"h2 mb-0 mr-3 balance-icon-container\">\n                  <i className=\"fab fa-ethereum\"></i>\n                </span>\n                <span className=\"balance-text-container\">{formatFromWeiBnToEtherStr(this.state.accountState.ethBalanceBN, 4)} ETH</span>\n              </div>\n            </div>\n            <div className=\"col-md-6\">\n              <div className=\"h3 balance-container text-center\">\n                <span className=\"h2 mb-0 mr-3 balance-icon-container\">\n                  <img className=\"\" style={{height: \"1em\"}} src={selftokenIconCrop} />\n                </span>\n                <span className=\"balance-text-container\">{formatFromWeiBnToEtherStr(this.state.accountState.selfBalanceBN, 2)} SELF</span>\n              </div>\n            </div>\n          </div>\n\n\n          {/* <div className=\"text-center mb-5\">\n            <ERC20TransferForm\n              web3={web3}\n              accounts={accounts}\n              selfTokenContract={selfTokenContract}\n              callback={this.fetchAccountState}\n            />\n          </div> */}\n\n          <DoubleBorderTitle>Transfer without ETH</DoubleBorderTitle>\n          <div className=\"text-center mb-5\">\n            <DelegatedTransferForm\n              web3={web3}\n              accounts={accounts}\n              delegatedTransferOperator={delegatedTransferOperator}\n              networkId={networkId}\n              queryParams={queryParams}\n              callback={this.fetchAccountState}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter as Router, Route } from 'react-router-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <Router>\n    <Route path=\"/\" component={App} />\n    {/* <App /> */}\n  </Router>\n, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"doubleBorder\":\"DoubleBorderTitle_doubleBorder__1x_9g\",\"doubleBorderTitle\":\"DoubleBorderTitle_doubleBorderTitle__1RtIo\"};"],"sourceRoot":""}